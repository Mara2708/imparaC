{% extends "base.html" %}

{% block title %}Risultati finali — Impara C{% endblock %}

{% block content %}
<section id="risultati" class="section">
  <h2>📊 Risultati finali</h2>

  {% if nome and corso %}
  <div class="results-summary">
    <p><strong>Nome studente:</strong> {{ nome }}</p>
    <p><strong>Corso:</strong> {{ corso }}</p>
    <p><strong>Punteggio totale:</strong> {{ punteggio }} punti</p>
    <p><strong>Errori commessi:</strong> {{ errori|default(0) }}</p>
    <p><strong>Livello raggiunto:</strong> {{ livello_nome }}</p>
  </div>

  <div class="progress-wrapper">
    <p>Avanzamento complessivo:</p>
    <div class="progress-bar-container">
      <div class="progress-bar" style="width: {{ progresso|default(0) }}%;"></div>
    </div>
    <p><strong>{{ progresso|default(0) }}%</strong> completato</p>
  </div>

  {% if progresso == 100 %}
  <div class="certificate">
    <h3>🎉 Complimenti {{ nome }}!</h3>
    <p>Hai completato tutti i livelli del corso <strong>“Impara C”</strong>.</p>
    <p>Hai dimostrato padronanza delle basi del linguaggio C e delle sue strutture fondamentali.</p>
  </div>
  {% else %}
  <div class="keep-going">
    <h3>💪 Continua così!</h3>
    <p>Sei arrivato al livello <strong>{{ livello_nome }}</strong>.<br>
    Raggiungi 100 punti per sbloccare il certificato finale!</p>
  </div>
  {% endif %}

  {% else %}
  <div class="card mini">
    <p>⚠️ Nessun risultato disponibile. Completa un quiz per visualizzare i tuoi progressi.</p>
  </div>
  {% endif %}

  <div class="row-buttons">
    <a href="{{ url_for('livelli') }}" class="btn">⬅ Torna ai livelli</a>
    <a href="{{ url_for('home') }}" class="btn btn-alt">🏠 Torna alla Home</a>
    <a href="{{ url_for('esporta_dati') }}" class="btn">📤 Esporta dati</a>

  </div>
</section>
{% endblock %}
